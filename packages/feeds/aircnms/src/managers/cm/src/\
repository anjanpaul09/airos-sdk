#include <stdint.h>
#include <stdio.h>
#include <string.h>
#include <unistd.h>
#include <radio_vif.h>
#include "../../../libs/uciconfig/inc/uci_ops.h"


bool target_config_radio_get(radio_record_t *record)
{
    printf("Ankit: %s %d\n", __func__, __LINE__);
    struct airpro_mgr_wlan_radio_params rad_params;
    int rid = 0;
    char *pkg = "wireless";
    char *sec_type = "wifi-iface";
    char radio_name[8] = {0};
    int i;
    long rc;

    memset(record, 0, sizeof(*record));
    record->n_radio = 2; //set a macro for num radios
    for (rid = 0; rid < 2; rid++) {
        sprintf(radio_name, "wifi%d", rid);
        memset(&rad_params, 0, sizeof(struct airpro_mgr_wlan_radio_params));
        uci_get_radio_params(radio_name, &rad_params);
        
        //fill radio params to ctx
        memcpy(&record->radio[rid], &rad_params, sizeof(struct airpro_mgr_wlan_radio_params));
        /*
        strcpy(device_entry->radio[rid].radio_type, radio_name);
        strcpy(device_entry->radio[rid].channel, "1");
        strcpy(device_entry->radio[rid].country, "IN");
        strcpy(device_entry->radio[rid].hwmode, "HW");
        strcpy(device_entry->radio[rid].htmode, "HT");
        strcpy(device_entry->radio[rid].bw, "100");
        strcpy(device_entry->radio[rid].txpower, " 25");
        strcpy(device_entry->radio[rid].disabled, "true");
        strcpy(device_entry->radio[rid].channel_width, "80");
        strcpy(device_entry->radio[rid].max_sta, "12");
        device_entry->radio[rid].radio_index = rid;
        */
    }
    return true;

}

bool target_config_vif_get(vif_record_t *record)
{
    struct airpro_mgr_get_all_uci_section_names sec_arr_names;
    struct airpro_mgr_wlan_vap_params vap_params;
    int vid = 0;
    char *pkg = "wireless";
    char *sec_type = "wifi-iface";
    char param[20];
//    memset(&sec_arr_names, 0, sizeof(struct airpro_mgr_get_all_uci_section_names));
    //uci_get_all_section_names(pkg, sec_type, &sec_arr_names);

    record->n_vif = sec_arr_names.num_entry;
    device_entry->n_vif = 4;
    for (vid = 0; vid < device_entry->n_vif; vid++) {
        //memset(&vap_params, 0,sizeof(struct airpro_mgr_wlan_vap_params));
        //uci_get_vap_params(sec_arr_names.sec_name[vid], &vap_params);
        memset(param, 0, sizeof(param));
        sprintf(param, "wifinet%d", vid);
        //fill vifs params to ctx
        strcpy(record->vif[vid].record_id, param);
        strcpy(record->vif[vid].ssid, "airpro");
        strcpy(record->vif[vid].key, "12345");
        strcpy(record->vif[vid].encryption, "wpa2");
        strcpy(record->vif[vid].device, "wifi0");

    }

    return true;
}
