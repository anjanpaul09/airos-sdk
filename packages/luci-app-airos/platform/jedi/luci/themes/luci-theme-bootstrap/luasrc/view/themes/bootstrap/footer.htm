<%#
 Copyright 2008 Steven Barth <steven@midlink.org>
 Copyright 2008 Jo-Philipp Wich <jow@openwrt.org>
 Copyright 2012 David Menting <david@nut-bolt.nl>
 Licensed to the public under the Apache License 2.0.
-%>

<%
	local ver = require "luci.version"
	local disp = require "luci.dispatcher"
	local request  = disp.context.path
	local category = request[1]
	local tree = disp.node()
	local categories = disp.node_childs(tree)
%>
   <footer>
    <!-- <a href="https://github.com/openwrt/luci">Powered by <%= ver.luciname %> (<%= ver.luciversion %>)</a> / <%= ver.distversion %>
    <% if #categories > 1 then %>
     <ul class="breadcrumb pull-right" id="modemenu">
	    <% for i, r in ipairs(categories) do %>
		    <li<% if request[1] == r then %> class="active"<%end%>><a href="<%=controller%>/<%=r%>/"><%=striptags(translate(tree.nodes[r].title))%></a> <span class="divider">|</span></li>
	    <% end %>
     </ul>
    <% end %> -->
   </footer>
   </div>
  </div>
  <script src="<%=media%>/bootstrap.bundle.js"></script>
  <script>
      document.addEventListener("DOMContentLoaded", function () {
         let tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));
         tooltipTriggerList.map(function (tooltipTriggerEl) {
            return new bootstrap.Tooltip(tooltipTriggerEl);
         });
      });

      function copyToClipboard(element, text) {
         if (navigator.clipboard && window.isSecureContext) {
            navigator.clipboard.writeText(text).then(() => {
               showTooltip(element, "Copied!");
            }).catch(err => {
               console.error("Copy failed", err);
            });
         } else {
            let textArea = document.createElement("textarea");
            textArea.value = text;
            document.body.appendChild(textArea);
            textArea.select();
            try {
               document.execCommand('copy');
               showTooltip(element, "Copied!");
            } catch (err) {
               console.error("Fallback copy failed", err);
            }
            document.body.removeChild(textArea);
         }
      }

      function showTooltip(element, message) {
         let tooltip = bootstrap.Tooltip.getInstance(element);
         if (tooltip) {
            tooltip.setContent({ '.tooltip-inner': message });
            tooltip.show();

            setTimeout(() => {
               tooltip.setContent({ '.tooltip-inner': 'Copy' });
               tooltip.hide();
            }, 1000);
         }
      }
   </script>

 </body>
</html>

